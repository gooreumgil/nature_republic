<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="partials/header :: header"/>
<link rel="stylesheet" th:href="@{/css/order.css}">
<style>
    header {
        box-shadow: 0 0 5px 0 rgba(0, 0, 0, .15) !important;
    }
</style>
<body>

    <header th:replace="partials/bodyHeader :: bodyHeader"/>

    <section class="container">
        <div class="title-box">
            <h2>상품 주문</h2>
            <p>네이처리퍼블릭은 자연의 완벽함을 믿습니다.</p>
        </div>

        <ul class="item__info-wrap">
            <li class="item__list top-line clearfix">
                <div class="img-div"></div>
                <div class="info-div">상품정보</div>
                <div class="quantity-div">수량</div>
                <div class="points-div">적립포인트</div>
                <div class="price-div">금액</div>
            </li>
            <li class="item__list content clearfix" th:object="${itemDto}">
                <div class="img-div">
                    <div class="list__inner">
                        <img th:src="@{${'/upload/' + itemDto.s3Key}}" alt="" class="order-item-img">
                    </div>
                </div>
                <div class="info-div">
                    <div class="list__inner">
                        <p th:text="*{itemName}" class="bold"></p>
                    </div>
                </div>
                <div class="quantity-div">
                    <div class="list__inner">
                        <p th:text="${count + '개'}"></p>
                    </div>
                </div>
                <div class="points-div">
                    <div class="list__inner">
                        <p th:text="*{price * 1 / 10 + 'p'}"></p>
                    </div>
                </div>
                <div class="price-div">
                    <div class="list__inner">
                        <p th:text="*{#numbers.formatInteger(price, 3, 'COMMA') + '원'}" class="bold"></p>
                    </div>
                </div>
            </li>
        </ul>

        <form th:action="@{/order}" method="post" th:object="${orderItemDto}">
            <input type="hidden" th:field="*{memberId}" th:value="${memberDto.id}">
            <input type="hidden" th:field="*{itemId}" th:value="${itemDto.id}">

            <div class="form-div delivery">
                <h3>배송정보</h3>

                <label th:for="addressee">수령인</label>
                <input type="text" id="addressee" name="addressee" th:value="${memberDto.name}">

                <label th:for="phoneNumber">연락처</label>
                <input type="number" id="phoneNumber" name="phoneNumber" th:value="${memberDto.phoneNumber.number1 + memberDto.phoneNumber.number2 + memberDto.phoneNumber.number3}">

                <label th:for="mainAddress">기본주소</label>
                <input type="text" id="mainAddress" name="mainAddress" th:value="${memberDto.address.city + ' ' + memberDto.address.street}" >

                <label th:for="detailAddress">상세주소</label>
                <input type="text" id="detailAddress" name="detailAddress" th:value="${memberDto.address.zipcode}">
            </div>

            <ul class="clearfix pay-wrap">



                <li class="pay-list points">
                    <div class="pay-inner">
                        <div class="inner-box">

                            <div class="title-box">
                                <h3>할인 및 쿠폰</h3>
                            </div>

                            <label>보유중인 포인트</label>
                            <p th:text="${memberDto.points}"></p>
                        </div>

                        <div class="inner-box">
                            <label th:for="usePoints">사용할 포인트</label>
                            <input type="number" th:field="*{usePoints}">
                        </div>

                    </div>
                </li>

                <li class="pay-list payment">

                    <div class="title-box">
                        <h3>결제정보</h3>
                    </div>

                    <div class="total-price">
                        <h4>총 결제금액</h4>
                        <p>15,000원</p>
                    </div>
                    <button type="submit">주문하기</button>
                </li>
            </ul>

        </form>
    </section>

</body>
</html>